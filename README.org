#+title: Home AI server

* Goals
- Easy-to-use, fully featured AI chat interface
- Access to one or more frontier models
- Multi-user
- Accessible on LAN only
- Pay as you go for all LLM interactions
- Installable on mobile as a progressive web app

For more on this project's motivation and a setup guide, see the blog post:
https://shawnhoover.dev/notes/home-ai-server.html.

* Implementation
- open-webui running in docker-compose
- Backed by AWS Bedrock foundation models, local ollama, and any
  openai-compatible providers you connect
- bedrock-access-gateway to access Bedrock chat models
- litellm API adapter to access Anthropic models and Bedrock embeddings
- nginx SSL termination with self-signed cert

** Backup
- Database: It's in the bind mount volume, available to local machine backup services.
- config.json: TBD. Meanwhile you have to remember to download it from the admin
  panel.

* TODO
- [ ] Create open-webui config.json backup strategy
- [ ] Move secrets volumes to docker compose secrets
- [X] Create DB backup strategy
- [X] Set up auto-update
- [X] Document/automate checking out bedrock-access-gateway
- [X] Prefix AWS environment variables in .env

* Setup
Clone and pull submodules to get Bedrock Access Gateway:

#+begin_src sh
git clone --recurse-submodules https://github.com/shoover/home-ai-server.git
#+end_src

** Create certs
#+begin_src sh
mkdir -p certs

openssl req \
  -x509 -nodes -days 365 -newkey rsa:2048 \
  -subj "/CN=YOUR-COMPUTERNAME.local" \
  -keyout certs/key.pem \
  -out certs/cert.pem
#+end_src

** Set up Open WebUI
See https://shawnhoover.dev/notes/home-ai-server.html.

** Update submodules
#+begin_src sh
git submodule update --remote bedrock-access-gateway
git add bedrock-access-gateway
git commit -m "Bump submodules"
#+end_src
